# ROS 2 workspace setting

mkdir -p ~/ros2_nanoowl_ws/src
cd ~/ros2_nanoowl_ws/src

# repository clone

cd ~/ros2_nanoowl_ws/src
git clone https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_common.git
git clone https://github.com/NVIDIA-AI-IOT/ROS2-NanoOWL.git
git clone https://github.com/NVIDIA-AI-IOT/nanoowl.git
git clone https://github.com/NVIDIA-AI-IOT/torch2trt.git
git clone --branch humble https://github.com/ros2/demos.git

# Install dependencies(pytorch, TensorRT 생략)

## torchvision 0.18.0 install
cd ~/ros2_nanoowl_ws/src
git clone --branch v0.18.0 https://github.com/pytorch/vision.git
cd vision
pip install .

## Transformers & Matplotlib install
pip install transformers matplotlib

## torch2trt package install
cd ~/ros2_nanoowl_ws/src/torch2trt
pip install .

## NanoOWL package install
cd ~/ros2_nanoowl_ws/src/nanoowl
pip install .

##
cd ros2_nanoowl_ws/src/nanoowl
mkdir -p data
python3 -m nanoowl.build_image_encoder_engine data/owl_image_encoder_patch32.engine


##
cp -r data/ ~/ros2_nanoowl_ws/src/ROS2-NanoOWL

